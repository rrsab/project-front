<html lang="RU">
<head>
    <meta charset="UTF-8">
    <title>RPG</title>
    <script src=https://code.jquery.com/jquery-3.6.0.min.js></script>
    <link href="/css/my.css" rel="stylesheet">
</head>
<body onload="show_list()">
<h1>RPG admin panel</h1>
<div>
    <label for="count_1">Count per page:</label>
    <select id="count_1" onchange="show_list()">
        <option value="3">3</option>
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="14">14</option>
    </select>
    <table id="TableBase" >
        <thead>
            <tr>
                <th>#</th><th>Name</th><th>Title</th><th>Race</th><th>Profession</th><th>Level</th><th>Birthday</th><th>Banned</th>
            </tr>
        </thead>
        <tbody>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
            <td>5</td>
            <td>6</td>
            <td>7</td>
            <td>8</td>
        </tbody>
    </table>
    <div id="paging_buttons" >Pages:</div>
</div>

<script>
    function show_list() {
        let url="/rest/players";
        $.get(url, function (response) {
            $.each(response, function (i, item) {
                $('<tr>').html("<td>"
                    + item.id + "</td><td>"
                    + item.name + "</td><td>"
                    + item.title + "</td><td>"
                    + item.race + "</td><td>"
                    + item.profession + "</td><td>"
                    + item.level + "</td><td>"
                    + new Date(item.birthday).toLocaleDateString() + "</td><td>"
                    + item.banned + "</td>"
                ).appendTo("#TableBase");
            })
            let totalCount=getTotalCount()
        })
    }

    function getTotalCount() {
        let url="/rest/players/count"
        let  res=0
        $.ajax({
            url: url,
            async: false,
            success: function (result) {
                res=parseInt(result)
            }
        })
        console.log(res)
        return res
    }

</script>
</body>
</html>